<!DOCTYPE html>
<html lang="en">
<head>
    <title>Plaker</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/open-iconic-bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/aos.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/ionicons.min.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.timepicker.css') }}">


    <link rel="stylesheet" href="{{ url_for('static', filename='css/flaticon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/icomoon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
        <a class="navbar-brand" href="/">Plaker</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a href="https://github.com/MandarGogate/Plaker" target="_blank" class="nav-link">GitHub</a></li>
            </ul>
        </div>
    </div>
</nav>
<!-- END nav -->

<section class="home-slider js-fullheight owl-carousel bg-white">
    <div class="slider-item js-fullheight" style="background: rgb(145, 189, 165)">
        <div class="overlay"></div>
        <div class="container">
            <div class="row d-flex no-gutters slider-text js-fullheight align-items-center justify-content-end" data-scrollax-parent="true">

                <div class="one-third order-md-last img js-fullheight" style="background-image:url({{ url_for('static', filename='images/bg.jpg') }});padding: 0%;">
                    <h3 class="vr">Since - 2019</h3>
                </div>
                <div class="one-forth d-flex js-fullheight align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
                    <div class="text">
                        <h1 class="mb-4">Plagiarism Checker</h1>
                        <h3>Quickly check and visualise plagiarism between two documents.</h3>
                        <p><a href="#Plaker" class="btn btn-primary px-4 py-3 mt-3">Try it out</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="ftco-section ftc-no-pb" id="Plaker">

    <div class="container-wrap">
        <div class="row d-flex align-items-stretch no-gutters">
            <div class="col-md-12 p-5">
                <form id="checker">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.subdoc(cols="35", rows="10", class_="form-control", placeholder="Old Document")}}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.maindoc(cols="35", rows="10", class_="form-control", placeholder="Modified Document")}}
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        {{ form.hidden_tag() }}
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Analyse" class="btn btn-primary py-3 px-5">
                    </div>
                </form>
            </div>
        </div>
        <div class="container">
        <div class="row no-gutters">
            <div class="col-md-9 p-5 wrap-about pb-md-5 ftco-animate justify-content-end" id="result" style="font-size: 18px;">

            </div>
            <div class="col-md-9 p-5 wrap-about pb-md-5 ftco-animate justify-content-end" style="font-size: 18px;">
            <button id='cmd' class='btn btn-secondary py-3 px-5 form-group' style="visibility:hidden;">Export Report to PDF</button>"

            </div>
        </div>
    </div>
    </div>
</section>

<footer class="ftco-footer ftco-bg-dark ftco-section">
    <div class="container">
        <div class="row mb-5">
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Plaker</h2>
                    <p>Quickly check and visualise plagiarism between two documents.
                    </p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">

                <p>
                    Copyright &copy;<script>document.write(new Date().getFullYear()); </script> <a href="https://www.mandargogate.com" target="_blank">Mandar Gogate</a>
                    All rights reserved
                </p>
                <p class="text-right">This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
            </div>
        </div>
    </div>
</footer>


<!-- loader -->
<div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/>
    </svg>
</div>


<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-migrate-3.0.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.waypoints.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.stellar.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/aos.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.animateNumber.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/scrollax.min.js') }}"></script>
<script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js" integrity="sha256-w6/1B0uwkpR3uX0YUw3k2zzHnq6xDNdVZHLIdz8xV6I=" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
                $(document).ready(function() {
                    $('form').submit(function (e) {
                        var url = "{{ url_for('analyse') }}"; // send the form data here.

                        $.ajax({
                            type: "POST",
                            url: url,
                            data: $('form').serialize(), // serializes the form's elements.
                            success: function (data) {
                                $("#result").html("<h2>Processed output: </h2></br><p>"+data["data"]+"</p>");
                                document.getElementById('cmd').style.visibility = 'visible';
                            }
                        });
                        $("#result").html("<h2>Processing...</h2>");
                        e.preventDefault(); // block the traditional submission of the form.
                    });
                    // Inject our CSRF token into our AJAX request.
                    $.ajaxSetup({
                        beforeSend: function(xhr, settings) {
                            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                                xhr.setRequestHeader("X-CSRFToken", "{{ form.csrf_token._value() }}")
                            }
                        }
                    })
                });

</script>
<script>
    var doc = new jsPDF();
var specialElementHandlers = {
    '#editor': function (element, renderer) {
        return true;
    }
};

$('#cmd').click(function () {
    doc.fromHTML($('#result').html(), 15, 15, {
        'width': 170,
            'elementHandlers': specialElementHandlers
    });
    doc.save('report.pdf');
});
</script>
</body>
</html>